{
 "settings": {
   "analysis": {
     "filter": {
       "beamery_email_filter": {
         "type": "pattern_capture",
         "preserve_original": true,
         "patterns": [
           "([^@]+)",
           "(\\p{L}+)",
           "(\\d+)",
           "@(.+)"
         ]
       },
       "ngram_filter": {
         "type": "ngram",
         "min_gram": 3,
         "max_gram": 20
       }
     },
     "analyzer": {
       "beamery_partial_match": {
         "type": "custom",
         "tokenizer": "standard",
         "filter": [
           "lowercase",
           "ngram_filter"
         ]
       },
       "beamery_email": {
         "type": "custom",
         "tokenizer": "uax_url_email",
         "filter": [
           "beamery_email_filter",
           "unique",
           "lowercase"
         ]
       },
       "typeahead": {
         "type": "custom",
         "tokenizer": "suffix_phrase",
         "filter": [
           "lowercase",
           "asciifolding"
         ]
       }
     },
     "tokenizer": {
       "suffix_phrase": {
         "type": "path_hierarchy",
         "delimiter": " ",
         "reverse": true
       }
     },
     "normalizer": {
       "beamery_normalizer": {
         "type": "custom",
         "char_filter": [],
         "filter": [
           "lowercase"
         ]
       }
     }
   }
 },
 "mappings": {
   "contacts": {
     "properties": {
       "id": {
         "type": "keyword"
       },
       "companyId": {
         "type": "keyword"
       },
       "type": {
         "type": "keyword",
         "normalizer": "beamery_normalizer"
       },
       "firstName": {
         "type": "text",
         "fields": {
           "keyword": {
             "type": "keyword",
             "normalizer": "beamery_normalizer",
             "ignore_above": 256
           }
         }
       },
       "lastName": {
         "type": "text",
         "fields": {
           "keyword": {
             "type": "keyword",
             "normalizer": "beamery_normalizer",
             "ignore_above": 256
           }
         }
       },
       "middleNames": {
         "type": "text"
       },
       "fullName": {
         "type": "text",
         "fields": {
           "keyword": {
             "type": "keyword",
             "normalizer": "beamery_normalizer",
             "ignore_above": 256
           },
           "partial": {
             "type": "text",
             "analyzer" : "beamery_partial_match",
             "search_analyzer" : "standard"
           }
         }
       },
       "age": {
         "type": "byte"
       },
       "birthdate": {
         "type": "date"
       },
       "primaryPhoneNumber": {
         "properties": {
           "id": {
             "type": "keyword"
           },
           "value": {
             "type": "keyword",
             "normalizer": "beamery_normalizer"
           }
         }
       },
       "primaryPhoto": {
         "properties": {
           "id": {
             "type": "keyword"
           },
           "value": {
             "type": "keyword"
           }
         }
       },
       "primaryEmail": {
         "properties": {
           "id": {
             "type": "keyword"
           },
           "value": {
             "type": "text",
             "fields": {
               "string": {
                 "type": "text",
                 "analyzer": "beamery_email"
               },
               "keyword": {
                 "type": "keyword",
                 "normalizer": "beamery_normalizer",
                 "ignore_above": 256
               }
             }
           }
         }
       },
       "primaryExperience": {
         "properties": {
           "id": {
             "type": "keyword"
           },
           "organisationName": {
             "type": "text",
             "fields": {
               "typeahead": {
                 "type": "text",
                 "analyzer": "typeahead"
               },
               "keyword": {
                 "type": "keyword",
                 "normalizer": "beamery_normalizer",
                 "ignore_above": 256
               },
               "partial": {
                 "type": "text",
                 "analyzer" : "beamery_partial_match",
                 "search_analyzer" : "standard"
               }
             }
           },
           "role": {
             "type": "text",
             "fields": {
               "typeahead": {
                 "type": "text",
                 "analyzer": "typeahead"
               },
               "keyword": {
                 "type": "keyword",
                 "normalizer": "beamery_normalizer",
                 "ignore_above": 256
               },
               "partial": {
                 "type": "text",
                 "analyzer" : "beamery_partial_match",
                 "search_analyzer" : "standard"
               }
             }
           }
         }
       },
       "primaryEducation": {
         "properties": {
           "id": {
             "type": "keyword"
           },
           "organisationName": {
             "type": "text",
             "fields": {
               "typeahead": {
                 "type": "text",
                 "analyzer": "typeahead"
               },
               "keyword": {
                 "type": "keyword",
                 "normalizer": "beamery_normalizer",
                 "ignore_above": 256
               }
             }
           }
         }
       },
       "photos": {
         "properties": {
           "values": {
             "type": "nested",
             "properties": {
               "id": {
                 "type": "keyword"
               },
               "value": {
                 "type": "keyword"
               },
               "primary": {
                 "type": "boolean"
               },
               "type": {
                 "type": "keyword",
                 "normalizer": "beamery_normalizer"
               },
               "deleted": {
                 "type": "boolean"
               }
             }
           }
         }
       },
       "phoneNumbers": {
         "properties": {
           "values": {
             "type": "nested",
             "properties": {
               "id": {
                 "type": "keyword"
               },
               "value": {
                 "type": "keyword",
                 "normalizer": "beamery_normalizer"
               },
               "deleted": {
                 "type": "boolean"
               }
             }
           }
         }
       },
       "emails": {
         "properties": {
           "values": {
             "type": "nested",
             "properties": {
               "id": {
                 "type": "keyword"
               },
               "value": {
                 "type": "text",
                 "fields": {
                   "string": {
                     "type": "text",
                     "analyzer": "beamery_email"
                   },
                   "keyword": {
                     "type": "keyword",
                     "normalizer": "beamery_normalizer",
                     "ignore_above": 256
                   }
                 }
               },
               "type": {
                 "type": "keyword",
                 "normalizer": "beamery_normalizer"
               }
             }
           }
         }
       },
       "location": {
         "properties": {
           "geometry": {
             "properties": {
               "type": {
                 "type": "keyword",
                 "normalizer": "beamery_normalizer"
               },
               "coordinates": {
                 "type": "geo_point"
               }
             }
           },
           "address": {
             "type": "text",
             "fields": {
               "typeahead": {
                 "type": "text",
                 "analyzer": "typeahead"
               },
               "keyword": {
                 "type": "keyword",
                 "normalizer": "beamery_normalizer",
                 "ignore_above": 256
               }
             }
           },
           "timezone": {
             "type": "byte"
           },
           "city": {
             "type": "text",
             "fields": {
               "keyword": {
                 "type": "keyword",
                 "normalizer": "beamery_normalizer",
                 "ignore_above": 256
               }
             }
           },
           "postalCode": {
             "type": "keyword",
             "normalizer": "beamery_normalizer"
           },
           "country": {
             "type": "text",
             "fields": {
               "keyword": {
                 "type": "keyword",
                 "normalizer": "beamery_normalizer",
                 "ignore_above": 256
               }
             }
           },
           "countryCode": {
             "type": "keyword",
             "normalizer": "beamery_normalizer"
           }
         }
       },
       "experience": {
         "properties": {
           "values": {
             "type": "nested",
             "properties": {
               "current": {
                 "type": "boolean"
               },
               "endDate": {
                 "type": "date"
               },
               "experienceDuration": {
                 "type": "short"
               },
               "id": {
                 "type": "keyword"
               },
               "organisationName": {
                 "type": "text",
                 "fields": {
                   "typeahead": {
                     "type": "text",
                     "analyzer": "typeahead"
                   },
                   "keyword": {
                     "type": "keyword",
                     "normalizer": "beamery_normalizer",
                     "ignore_above": 256
                   }
                 }
               },
               "role": {
                 "type": "text",
                 "fields": {
                   "keyword": {
                     "type": "keyword",
                     "normalizer": "beamery_normalizer",
                     "ignore_above": 256
                   }
                 }
               },
               "startDate": {
                 "type": "date"
               }
             }
           }
         }
       },
       "education": {
         "properties": {
           "values": {
             "type": "nested",
             "properties": {
               "deleted": {
                 "type": "boolean"
               },
               "id": {
                 "type": "keyword"
               },
               "startDate": {
                 "type": "date"
               },
               "endDate": {
                 "type": "date"
               },
               "organisationId": {
                 "type": "keyword"
               },
               "organisationName": {
                 "type": "text",
                 "fields": {
                   "typeahead": {
                     "type": "text",
                     "analyzer": "typeahead"
                   },
                   "keyword": {
                     "type": "keyword",
                     "normalizer": "beamery_normalizer",
                     "ignore_above": 256
                   }
                 }
               },
               "degree": {
                 "type": "text",
                 "fields": {
                   "keyword": {
                     "type": "keyword",
                     "normalizer": "beamery_normalizer",
                     "ignore_above": 256
                   }
                 }
               },
               "program": {
                 "type": "text",
                 "fields": {
                   "keyword": {
                     "type": "keyword",
                     "normalizer": "beamery_normalizer",
                     "ignore_above": 256
                   }
                 }
               },
               "major": {
                 "type": "text",
                 "fields": {
                   "keyword": {
                     "type": "keyword",
                     "normalizer": "beamery_normalizer",
                     "ignore_above": 256
                   }
                 }
               },
               "level": {
                 "type": "text",
                 "fields": {
                   "keyword": {
                     "type": "keyword",
                     "normalizer": "beamery_normalizer",
                     "ignore_above": 256
                   }
                 }
               },
               "location": {
                 "type": "text",
                 "fields": {
                   "keyword": {
                     "type": "keyword",
                     "normalizer": "beamery_normalizer",
                     "ignore_above": 256
                   }
                 }
               }
             }
           }
         }
       },
       "links": {
         "properties": {
           "values": {
             "type": "nested",
             "properties": {
               "id": {
                 "type": "keyword"
               },
               "type": {
                 "type": "keyword",
                 "normalizer": "beamery_normalizer"
               },
               "service": {
                 "type": "keyword",
                 "normalizer": "beamery_normalizer"
               },
               "rss": {
                 "type": "keyword"
               },
               "username": {
                 "type": "keyword",
                 "normalizer": "beamery_normalizer"
               },
               "userId": {
                 "type": "keyword",
                 "normalizer": "beamery_normalizer"
               },
               "bio": {
                 "type": "text",
                 "fields": {
                   "keyword": {
                     "type": "keyword",
                     "normalizer": "beamery_normalizer",
                     "ignore_above": 256
                   }
                 }
               },
               "value": {
                 "type": "keyword"
               },
               "deleted": {
                 "type": "boolean"
               },
               "following": {
                 "type": "long"
               },
               "followers": {
                 "type": "long"
               }
             }
           }
         }
       },
       "honours": {
         "properties": {
           "values": {
             "type": "nested",
             "properties": {
               "id": {
                 "type": "keyword"
               },
               "name": {
                 "type": "text",
                 "fields": {
                   "keyword": {
                     "type": "keyword",
                     "normalizer": "beamery_normalizer",
                     "ignore_above": 256
                   }
                 }
               },
               "organisationId": {
                 "type": "keyword"
               },
               "organisationName": {
                 "type": "text",
                 "fields": {
                   "keyword": {
                     "type": "keyword",
                     "normalizer": "beamery_normalizer",
                     "ignore_above": 256
                   }
                 }
               },
               "description": {
                 "type": "text",
                 "fields": {
                   "keyword": {
                     "type": "keyword",
                     "normalizer": "beamery_normalizer",
                     "ignore_above": 256
                   }
                 }
               },
               "awardedAt": {
                 "type": "date"
               }
             }
           }
         }
       },
       "portfolio": {
         "properties": {
           "values": {
             "type": "nested",
             "properties": {
               "id": {
                 "type": "keyword"
               },
               "name": {
                 "type": "text",
                 "fields": {
                   "keyword": {
                     "type": "keyword",
                     "normalizer": "beamery_normalizer",
                     "ignore_above": 256
                   }
                 }
               },
               "value": {
                 "type": "keyword",
                 "normalizer": "beamery_normalizer"
               },
               "description": {
                 "type": "text",
                 "fields": {
                   "keyword": {
                     "type": "keyword",
                     "normalizer": "beamery_normalizer",
                     "ignore_above": 256
                   }
                 }
               }
             }
           }
         }
       },
       "publications": {
         "properties": {
           "values": {
             "type": "nested",
             "properties": {
               "id": {
                 "type": "keyword"
               },
               "name": {
                 "type": "text",
                 "fields": {
                   "keyword": {
                     "type": "keyword",
                     "normalizer": "beamery_normalizer",
                     "ignore_above": 256
                   }
                 }
               },
               "value": {
                 "type": "keyword",
                 "normalizer": "beamery_normalizer"
               },
               "description": {
                 "type": "text",
                 "fields": {
                   "keyword": {
                     "type": "keyword",
                     "normalizer": "beamery_normalizer",
                     "ignore_above": 256
                   }
                 }
               },
               "venue": {
                 "type": "text",
                 "fields": {
                   "keyword": {
                     "type": "keyword",
                     "normalizer": "beamery_normalizer",
                     "ignore_above": 256
                   }
                 }
               }
             }
           }
         }
       },
       "skills": {
         "properties": {
           "values": {
             "type": "nested",
             "properties": {
               "id": {
                 "type": "keyword"
               },
               "value": {
                 "type": "text",
                 "fields": {
                   "keyword": {
                     "type": "keyword",
                     "normalizer": "beamery_normalizer",
                     "ignore_above": 256
                   }
                 }
               },
               "deleted": {
                 "type": "boolean"
               }
             }
           }
         }
       },
       "tags": {
         "properties": {
           "values": {
             "type": "nested",
             "properties": {
               "id": {
                 "type": "keyword"
               },
               "value": {
                 "type": "text",
                 "fields": {
                   "keyword": {
                     "type": "keyword",
                     "normalizer": "beamery_normalizer",
                     "ignore_above": 256
                   },
                   "partial": {
                     "type": "text",
                     "analyzer" : "beamery_partial_match",
                     "search_analyzer" : "standard"                      
                   }
                 }
               },
               "deleted": {
                 "type": "boolean"
               }
             }
           }
         }
       },
       "globalTags": {
         "properties": {
           "values": {
             "type": "nested",
             "properties": {
               "id": {
                 "type": "keyword"
               },
               "value": {
                 "type": "text",
                 "fields": {
                   "keyword": {
                     "type": "keyword",
                     "normalizer": "beamery_normalizer",
                     "ignore_above": 256
                   }
                 }
               }
             }
           }
         }
       },
       "languages": {
         "properties": {
           "values": {
             "type": "nested",
             "properties": {
               "id": {
                 "type": "keyword"
               },
               "value": {
                 "type": "text",
                 "fields": {
                   "keyword": {
                     "type": "keyword",
                     "normalizer": "beamery_normalizer",
                     "ignore_above": 256
                   }
                 }
               },
               "languageCode": {
                 "type": "keyword",
                 "normalizer": "beamery_normalizer"
               },
               "proficiency": {
                 "type": "text",
                 "fields": {
                   "keyword": {
                     "type": "keyword",
                     "normalizer": "beamery_normalizer",
                     "ignore_above": 256
                   }
                 }
               }
             }
           }
         }
       },
       "integrations": {
         "properties": {
           "greenhouse": {
             "properties": {
               "label": {
                 "type": "keyword",
                 "normalizer": "beamery_normalizer"
               },
               "externalId": {
                 "type": "long"
               },
               "url": {
                 "type": "keyword"
               },
               "lastSynced": {
                 "type": "date"
               },
               "applications": {
                 "type": "nested",
                 "properties": {
                   "id": {
                     "type": "keyword"
                   },
                   "jobs": {
                     "type": "nested",
                     "properties": {
                       "id": {
                         "type": "keyword"
                       },
                       "name": {
                         "type": "text",
                         "fields": {
                           "keyword": {
                             "type": "keyword",
                             "normalizer": "beamery_normalizer",
                             "ignore_above": 256
                           }
                         }
                       }
                     }
                   }
                 }
               }
             }
           }
         }
       },
       "assignedTo": {
         "type": "keyword"
       },
       "doNotContact": {
         "type": "boolean"
       },
       "deletedAt": {
         "type": "date"
       },
       "archivedAt": {
         "type": "date"
       },
       "createdAt": {
         "type": "date"
       },
       "updatedAt": {
         "type": "date"
       },
       "lastContact": {
         "type": "date"
       },
       "lastEmailInteraction": {
         "type": "date"
       },
       "lastHeardFrom": {
         "type": "date"
       },
       "lastInteraction": {
         "type": "date"
       },
       "lastActivity": {
         "type": "date"
       },
       "mergedAt": {
         "type": "date"
       },
       "es": {
         "type": "date"
       },
       "mergedWith": {
         "type": "keyword"
       },
       "mergedIn": {
         "type": "keyword"
       },
       "visitorUID": {
         "type": "keyword"
       },
       "vacancies": {
         "type": "nested",
         "properties": {
           "id": {
             "type": "keyword"
           },
           "priority": {
             "type": "keyword"
           },
           "date" : {
             "type": "date"
           },
           "value": {
             "type": "text",
             "fields": {
               "keyword": {
                 "type": "keyword",
                 "normalizer": "beamery_normalizer",
                 "ignore_above": 256
               }
             }
           },
           "stage": {
             "properties": {
               "id": {
                 "type": "keyword"
               },
               "date" : {
                 "type": "date"
               },
               "value": {
                 "type": "text",
                 "fields": {
                   "keyword": {
                     "type": "keyword",
                     "normalizer": "beamery_normalizer",
                     "ignore_above": 256
                   }
                 }
               }
             }
           },
           "rejectionReason": {
             "properties": {
               "id": {
                 "type": "keyword"
               },
               "date" : {
                 "type": "date"
               },
               "value": {
                 "type": "text",
                 "fields": {
                   "keyword": {
                     "type": "keyword",
                     "normalizer": "beamery_normalizer",
                     "ignore_above": 256
                   }
                 }
               }
             }
           },
           "integrations": {
             "properties": {
               "greenhouse": {
                 "properties": {
                   "id": {
                     "type": "long"
                   },
                   "url": {
                     "type": "keyword",
                     "normalizer": "beamery_normalizer"
                   }
                 }
               }
             }
           }
         }
       },
       "lists": {
         "type": "nested",
         "properties": {
           "id": {
             "type": "keyword"
           },
           "value": {
             "type": "text",
             "fields": {
               "keyword": {
                 "type": "keyword",
                 "normalizer": "beamery_normalizer",
                 "ignore_above": 256
               }
             }
           }
         }
       },
       "interests": {
         "type": "nested",
         "properties": {
           "id": {
             "type": "keyword"
           },
           "value": {
             "type": "text",
             "fields": {
               "keyword": {
                 "type": "keyword",
                 "normalizer": "beamery_normalizer",
                 "ignore_above": 256
               }
             }
           }
         }
       },
       "positions": {
         "type": "nested",
         "properties": {
           "id": {
             "type": "keyword"
           },
           "value": {
             "type": "text",
             "fields": {
               "keyword": {
                 "type": "keyword",
                 "normalizer": "beamery_normalizer",
                 "ignore_above": 256
               }
             }
           }
         }
       },
       "status": {
         "properties": {
           "date": {
             "type": "date"
           },
           "id": {
             "type": "keyword"
           },
           "sort": {
             "type": "keyword"
           },
           "value": {
             "type": "text",
             "fields": {
               "keyword": {
                 "type": "keyword",
                 "normalizer": "beamery_normalizer",
                 "ignore_above": 256
               }
             }
           }
         }
       },
       "source": {
         "properties": {
           "id": {
             "type": "keyword"
           },
           "value": {
             "type": "text",
             "fields": {
               "keyword": {
                 "type": "keyword",
                 "normalizer": "beamery_normalizer",
                 "ignore_above": 256
               }
             }
           },
           "integrations": {
             "properties": {
               "greenhouse": {
                 "properties": {
                   "id": {
                     "type": "long"
                   }
                 }
               }
             }
           }
         }
       },
       "creationSource": {
         "properties": {
           "value": {
             "type": "keyword",
             "normalizer": "beamery_normalizer"
           },
           "referral": {
             "type": "keyword",
             "normalizer": "beamery_normalizer"
           }
         }
       },
       "attachments": {
         "properties": {
           "values": {
             "type": "nested",
             "properties": {
               "id": {
                 "type": "keyword"
               },
               "filename": {
                 "type": "keyword",
                 "normalizer": "beamery_normalizer"
               },
               "type": {
                 "type": "keyword",
                 "normalizer": "beamery_normalizer"
               },
               "text": {
                 "type": "text",
                 "fields": {
                   "keyword": {
                     "type": "keyword",
                     "normalizer": "beamery_normalizer",
                     "ignore_above": 256
                   }
                 }
               }
             }
           }
         }
       },
       "customFields": {
         "type": "nested",
         "properties": {
           "displayName": {
             "type": "text",
             "fields": {
               "keyword": {
                 "type": "keyword",
                 "normalizer": "beamery_normalizer",
                 "ignore_above": 256
               }
             }
           },
           "id": {
             "type": "keyword",
             "normalizer": "beamery_normalizer"
           },
           "name": {
             "type": "keyword",
             "normalizer": "beamery_normalizer"
           },
           "value": {
             "type": "text",
             "fields": {
               "keyword": {
                 "type": "keyword",
                 "normalizer": "beamery_normalizer",
                 "ignore_above": 256
               }
             }
           }
         }
       },
       "totalExperience": {
         "type": "short"
       }
     }
   }
 }
}
